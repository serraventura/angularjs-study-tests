"use strict";angular.module("angularjsTestApp",[]),angular.module("angularjsTestApp").controller("shoppingListCtrl",function($scope,ShoppingService){function isFormOk(){var ret=!0;return(isNaN($scope.dom.qty)||isNaN($scope.dom.value))&&($scope.errMsg="Must be number",ret=!1),$scope.dom.item&&$scope.dom.qty&&$scope.dom.value||($scope.errMsg="Cannot be empty",ret=!1),ret}function cleanForm(){$scope.dom.item=null,$scope.dom.qty=null,$scope.dom.value=null,$scope.dom.must=null,$scope.errMsg=null}var shoppingService=new ShoppingService;$scope.editRowId=null,$scope.errMsg=null,$scope.listItem=shoppingService.getListOfItems(),$scope.dom={item:null,qty:null,value:null,must:!1},$scope.addItem=function(){isFormOk()&&(shoppingService.add({item:$scope.dom.item,qty:$scope.dom.qty,value:$scope.dom.value,must:$scope.dom.must}),cleanForm())},$scope.removeItem=function(item){shoppingService.remove(item)},$scope.removeAll=function(){shoppingService.removeAll()},$scope.isEditing=function(id){return id==$scope.editRowId},$scope.editItem=function(id){$scope.editRowId=id},$scope.editDone=function(){$scope.editRowId=null}}),angular.module("angularjsTestApp").factory("ShoppingService",function(){var publicApi=null,DB=[{item:"Apple",qty:1,value:0,must:!1},{item:"Banana",qty:1,value:0,must:!1},{item:"Pinneple",qty:1,value:0,must:!1},{item:"Mango",qty:1,value:0,must:!1},{item:"Passion Fruit",qty:1,value:0,must:!1},{item:"Blueberry",qty:1,value:0,must:!1}],ShoppingService=function(){publicApi=this,this.getListOfItems=function(){return DB},this.add=function(item){DB.push(item)},this.remove=function(item){var index=DB.indexOf(item);DB.splice(index,1)},this.removeAll=function(){DB.splice(0,DB.length)}};return ShoppingService}),angular.module("angularjsTestApp").directive("itemList",function(){return{templateUrl:"src/shoppingList/views/itemList.html",restrict:"E",controller:"shoppingListCtrl",link:{post:function(){}}}}),angular.module("angularjsTestApp").filter("totalValueQty",function(){return function(listItem){if(void 0==listItem)return 0;for(var sum=0,i=0;i<listItem.length;i++)sum+=listItem[i].qty*listItem[i].value;return sum}}),angular.module("angularjsTestApp").filter("totalValueMustHave",function(){return function(listItem){if(void 0==listItem)return 0;for(var sum=0,i=0;i<listItem.length;i++)listItem[i].must&&(sum+=listItem[i].value*listItem[i].qty);return sum}});